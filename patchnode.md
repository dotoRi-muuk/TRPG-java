# sideDamage 적용 순서 변경 패치 노트

## 변경 사항
- `sideDamage`의 적용 순서를 패시브와 배율 적용 후, 맨 뒤에 적용
- 새로운 공식: `sideDamage = (최종 데미지) * Math.Max((스탯-D20), 0) * 0.1`

## 애매했던 부분들

### 1. 트릭스터 - 난사 패시브의 sideDamage 적용 시점
- **문제**: 트릭스터의 난사 패시브는 반복 공격을 수행하며, 각 공격마다 sideDamage를 적용해야 하는지, 아니면 총합에 적용해야 하는지 불명확
- **결정**: 각 개별 공격마다 패시브(돌발 이벤트) 적용 후 sideDamage를 개별적으로 계산하여 적용
- **이유**: 각 공격이 독립적인 데미지 계산을 수행하므로, sideDamage도 개별적으로 계산하는 것이 논리적

### 2. 트릭스터 - 일점사/단골손님 패시브와 sideDamage의 관계
- **문제**: 일점사(200%)와 단골손님(150%) 패시브는 총 데미지에 적용되는데, 이 때 sideDamage 이후에 적용해야 하는지 여부
- **결정**: sideDamage는 각 개별 공격에 적용되고, 일점사/단골손님 패시브는 이미 sideDamage가 포함된 총합에 적용
- **이유**: 일점사/단골손님은 "총 데미지"에 대한 배율로, sideDamage 포함 후 적용이 타당

### 3. 창술사 - 약점파악 패시브의 50% 감소 적용
- **문제**: 기본 기술 50% 감소가 sideDamage 계산 전인지 후인지 불명확
- **결정**: 기본 데미지에 50% 적용 후, 그 결과를 기준으로 sideDamage 계산
- **이유**: sideDamage는 "최종 데미지"를 기준으로 계산되므로, 패시브 적용 후 계산이 맞음

### 4. 버서커 - 분노/희열 패시브와 sideDamage의 순서
- **문제**: 분노(감소한 체력당 2% 증가)와 희열(체력 20% 이하 시 200%)이 sideDamage 전/후 적용 여부
- **결정**: 기본 데미지에 분노/희열 패시브 적용 후, 그 결과를 기준으로 sideDamage 계산
- **이유**: "패시브와 배율 적용 후"라는 원칙에 따라 sideDamage는 항상 마지막에 적용

### 5. 닌자 - 순발력 패시브(75%)가 sideDamage에 영향을 미치는지
- **문제**: 순발력 패시브가 sideDamage 계산에 포함되어야 하는지
- **결정**: 포함됨. 기본 데미지 x 순발력(75%) 결과를 기준으로 sideDamage 계산
- **이유**: 모든 패시브와 배율은 sideDamage 계산 전에 적용되어야 함

### 6. 저격수 - 안정화 버프의 주사위 복제와 sideDamage
- **문제**: 안정화의 "주사위 복제(결과 2배)"가 sideDamage 계산 기준에 포함되는지
- **결정**: 포함됨. 주사위 복제는 기본 데미지를 증가시키는 효과이므로, sideDamage 계산 기준에 포함
- **이유**: 주사위 결과 자체가 변경되는 것이므로 패시브/배율과 동일하게 취급

### 7. 겜블러 - 운 판정 성공 시 변경되는 주사위와 sideDamage
- **문제**: 운 판정 성공 시 주사위가 변경되는 경우(D4→D12 등), sideDamage 계산은 변경된 주사위 결과를 기준으로 하는지
- **결정**: 변경된 주사위 결과를 기준으로 sideDamage 계산
- **이유**: 변경된 주사위 결과가 "최종 데미지"의 기준이 됨

### 8. 여러 스탯을 사용하는 경우 (궁수)
- **문제**: 궁수처럼 힘과 민첩 두 스탯을 동시에 사용하는 경우, sideDamage에 어떤 스탯을 사용하는지
- **결정**: 기존 코드와 동일하게 두 스탯 중 더 높은 값을 사용
- **이유**: 기존 로직 유지 및 플레이어에게 유리한 방향으로 해석

## 미완료 작업
모든 클래스 업데이트 완료!
